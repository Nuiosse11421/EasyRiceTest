{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Work/Code/Project/RiceInspectionApp/frontend/pages/history.js"],"sourcesContent":["// pages/history.js\r\nimport { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Link from 'next/link';\r\n\r\nconst HistoryPage = () => {\r\n    const [history, setHistory] = useState([]);\r\n    const [totalPages, setTotalPages] = useState(1);\r\n    const [page, setPage] = useState(1);\r\n    const [searchId, setSearchId] = useState('');\r\n    const [fromDate, setFromDate] = useState('');\r\n    const [toDate, setToDate] = useState('');\r\n    \r\n    // ดึงข้อมูล history\r\n    const fetchHistory = async () => {\r\n        try {\r\n            const res = await axios.get(`http://localhost:8000/history`, {\r\n                params: { page, searchId, formDate: fromDate, toDate }\r\n            });\r\n            setHistory(res.data.history);\r\n            setTotalPages(res.data.totalPages);\r\n        } catch (error) {\r\n            console.error('Error fetching history:', error);\r\n        }\r\n    };\r\n\r\n    // เรียกใช้เมื่อหน้าต่างโหลดหรือมีการเปลี่ยนแปลงข้อมูล\r\n    useEffect(() => {\r\n        fetchHistory();\r\n    }, [page, searchId, fromDate, toDate]);\r\n\r\n    const handleSearch = () => {\r\n        setPage(1); // รีเซ็ตไปยังหน้าที่ 1 เมื่อมีการค้นหาใหม่\r\n        fetchHistory();\r\n    };\r\n\r\n    const handleClear = () => {\r\n        setSearchId('');\r\n        setFromDate('');\r\n        setToDate('');\r\n        setPage(1); // รีเซ็ตการค้นหา\r\n        fetchHistory();\r\n    };\r\n\r\n    const handleRowClick = (inspectionId) => {\r\n        // คลิกที่แถว จะไปที่หน้าแสดงรายละเอียดของ inspectionId\r\n        window.location.href = `/result/${inspectionId}`;\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1>History</h1>\r\n            {/* Search Form */}\r\n            <div>\r\n                <input\r\n                    type=\"text\"\r\n                    value={searchId}\r\n                    onChange={(e) => setSearchId(e.target.value)}\r\n                    placeholder=\"Search by Inspection ID\"\r\n                />\r\n                <button onClick={handleSearch}>Search</button>\r\n                <button onClick={handleClear}>Clear</button>\r\n            </div>\r\n\r\n            <div>\r\n                <label>From Date: </label>\r\n                <input\r\n                    type=\"date\"\r\n                    value={fromDate}\r\n                    onChange={(e) => setFromDate(e.target.value)}\r\n                />\r\n                <label>To Date: </label>\r\n                <input\r\n                    type=\"date\"\r\n                    value={toDate}\r\n                    onChange={(e) => setToDate(e.target.value)}\r\n                />\r\n                <button onClick={handleSearch}>Search</button>\r\n            </div>\r\n\r\n            {/* Table */}\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Create Date - Time</th>\r\n                        <th>Inspection ID</th>\r\n                        <th>Name</th>\r\n                        <th>Standard</th>\r\n                        <th>Note</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {history.map((item) => (\r\n                        <tr key={item.inspectionID} onClick={() => handleRowClick(item.inspectionID)}>\r\n                            <td>{new Date(item.createDate).toLocaleString()}</td>\r\n                            <td>{item.inspectionID}</td>\r\n                            <td>{item.name}</td>\r\n                            <td>{item.standardName}</td>\r\n                            <td>{item.note}</td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n\r\n            {/* Pagination */}\r\n            <div>\r\n                <button onClick={() => setPage(page - 1)} disabled={page === 1}>Previous</button>\r\n                <span>Page {page} of {totalPages}</span>\r\n                <button onClick={() => setPage(page + 1)} disabled={page === totalPages}>Next</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HistoryPage;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 373, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}